# Harry Potter Text Analysis Notebook

This notebook is designed for conducting text analysis on "Harry Potter and the Sorcerer's Stone" using the LangChain library, OpenAI embeddings, and various other supporting tools. It illustrates a complete workflow from installing necessary libraries, encoding the book and its chapter summaries into vector stores, to answering questions about the book through a detailed question-answering pipeline.

## Overview

- **Installing Libraries**: The notebook begins with the installation of all necessary libraries, including `langchain`, `openai`, `faiss-gpu`, and others for vector store creation, document loading, and text embedding.

- **Importing Libraries**: Key Python libraries and modules from LangChain are imported for use in document processing, text splitting, vector store creation, and establishing a question-answering pipeline.

- **Setting Up Environment**: Specific configurations, such as setting the preferred encoding for PyPDF on Google Colab and setting the OpenAI API key, are made to prepare the environment for document loading and processing.

- **Document Loading and Processing**: The path to the PDF of "Harry Potter and the Sorcerer's Stone" is defined, followed by the splitting of the PDF into chapters and preprocessing of the text.

- **Summarization and Encoding**: Functions are defined and executed to create summaries of each chapter using a large language model (LLM), encode the book and chapter summaries into vector stores, and then create vector store retrievers.

- **Question Answering Pipeline**: A comprehensive pipeline is implemented to answer questions about the book. It includes modifying the questions to better fit the context, retrieving relevant documents and summaries, and using an LLM chain to generate answers.

- **Evaluation and Interaction**: The notebook concludes with preparing data for Ragas evaluation, conducting the evaluation with specified metrics, analyzing metric results, and providing an interactive chat interface for inquiring about Harry Potter.

## Key Components

- **`modify_question` and `create_context_per_question` Functions**: These functions are crucial for refining user queries and fetching relevant context from the text to form a solid base for answering.

- **`answer_question_pipeline` Function**: Orchestrates the complete process of answering a question, from query modification to fetching context and finally generating an answer.

- **Interactive Chat Interface**: Allows users to ask questions about Harry Potter interactively and receive answers based on the encoded book and chapter summaries.

- **Ragas Evaluation**: Prepares data and conducts an evaluation using the Ragas library to assess the correctness, faithfulness, relevancy, recall, and similarity of the answers generated by the pipeline.

## Installation

Ensure you have Python 3.6+ installed. Clone this notebook and install the required dependencies listed at the beginning of the notebook.

## Usage

To use this notebook:

1. Set your OpenAI API key as shown in the notebook.
2. Ensure the path to the PDF of "Harry Potter and the Sorcerer's Stone" is correctly specified.
3. Run the cells sequentially to explore the functionalities offered by the notebook, from text processing to interactive questioning.

## Conclusion

This notebook showcases a sophisticated approach to text analysis using advanced NLP techniques and tools. It provides a template for similar text analysis tasks that can be adapted to other books or documents for detailed exploration and understanding.
